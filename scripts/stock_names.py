#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
A股股票代码到中文名称映射表
支持从JSON文件加载完整列表
"""

import json
import os

# 基础映射表（常见股票）
STOCK_NAMES = {
    # 上海主板 - 600开头
    '600000': '浦发银行', '600004': '白云机场', '600009': '上海机场', '600010': '包钢股份',
    '600011': '华能国际', '600015': '华夏银行', '600016': '民生银行', '600018': '上港集团',
    '600019': '宝钢股份', '600025': '华能水电', '600028': '中国石化', '600029': '南方航空',
    '600030': '中信证券', '600031': '三一重工', '600036': '招商银行', '600038': '中直股份',
    '600048': '保利发展', '600050': '中国联通', '600061': '国投资本', '600085': '同仁堂',
    '600089': '特变电工', '600100': '同方股份', '600104': '上汽集团', '600109': '国金证券',
    '600111': '北方稀土', '600115': '东方航空', '600150': '中国船舶', '600170': '上海建工',
    '600176': '中国巨石', '600177': '雅戈尔', '600188': '兖矿能源', '600196': '复星医药',
    '600219': '南山铝业', '600221': '海航控股', '600276': '恒瑞医药', '600297': '广汇汽车',
    '600309': '万华化学', '600332': '白云山', '600340': '华夏幸福', '600346': '恒力石化',
    '600362': '江西铜业', '600369': '西南证券', '600383': '金地集团', '600406': '国电南瑞',
    '600436': '片仔癀', '600438': '通威股份', '600482': '中国动力', '600487': '亨通光电',
    '600489': '中金黄金', '600498': '烽火通信', '600519': '贵州茅台', '600522': '中天科技',
    '600547': '山东黄金', '600570': '恒生电子', '600585': '海螺水泥', '600588': '用友网络',
    '600606': '绿地控股', '600637': '东方明珠', '600660': '福耀玻璃', '600690': '海尔智家',
    '600703': '三安光电', '600745': '闻泰科技', '600760': '中航沈飞', '600809': '山西汾酒',
    '600837': '海通证券', '600848': '上海临港', '600887': '伊利股份', '600893': '航发动力',
    '600900': '长江电力', '600919': '江苏银行', '600926': '杭州银行', '600958': '东方证券',
    '600999': '招商证券',

    # 上海主板 - 601开头
    '601012': '隆基绿能', '601066': '中信建投', '601088': '中国神华', '601100': '恒立液压',
    '601111': '中国国航', '601138': '工业富联', '601155': '新城控股', '601166': '兴业银行',
    '601169': '北京银行', '601186': '中国铁建', '601211': '国泰君安', '601225': '陕西煤业',
    '601229': '上海银行', '601236': '红塔证券', '601288': '农业银行', '601318': '中国平安',
    '601319': '中国人保', '601328': '交通银行', '601336': '新华保险', '601360': '三六零',
    '601377': '兴业证券', '601390': '中国中铁', '601398': '工商银行', '601601': '中国太保',
    '601628': '中国人寿', '601633': '长城汽车', '601658': '邮储银行', '601668': '中国建筑',
    '601669': '中国电建', '601688': '华泰证券', '601728': '中国电信', '601766': '中国中车',
    '601788': '光大证券', '601800': '中国交建', '601808': '中海油服', '601818': '光大银行',
    '601828': '美凯龙', '601838': '成都银行', '601857': '中国石油', '601865': '福莱特',
    '601872': '招商轮船', '601877': '正泰电器', '601878': '浙商证券', '601881': '中国银河',
    '601888': '中国中免', '601898': '中煤能源', '601899': '紫金矿业', '601901': '方正证券',
    '601916': '浙商银行', '601919': '中远海控', '601933': '永辉超市', '601939': '建设银行',
    '601985': '中国核电', '601988': '中国银行', '601989': '中国重工', '601995': '中金公司',
    '601998': '中信银行',

    # 上海主板 - 603开头
    '603000': '人民网', '603019': '中科曙光', '603087': '甘李药业', '603160': '汇顶科技',
    '603195': '公牛集团', '603259': '药明康德', '603260': '合盛硅业', '603288': '海天味业',
    '603369': '今世缘', '603392': '万泰生物', '603501': '韦尔股份', '603799': '华友钴业',
    '603806': '福斯特', '603899': '晨光文具', '603986': '兆易创新', '603993': '洛阳钼业',

    # 深圳主板 - 000开头
    '000001': '平安银行', '000002': '万科A', '000004': '国华网安', '000006': '深振业A',
    '000008': '神州高铁', '000009': '中国宝安', '000012': '南玻A', '000021': '深科技',
    '000025': '特力A', '000027': '深圳能源', '000039': '中集集团', '000060': '中金岭南',
    '000061': '农产品', '000063': '中兴通讯', '000066': '中国长城', '000069': '华侨城A',
    '000100': 'TCL科技', '000157': '中联重科', '000166': '申万宏源', '000333': '美的集团',
    '000338': '潍柴动力', '000400': '许继电气', '000402': '金融街', '000413': '东旭光电',
    '000415': '渤海租赁', '000425': '徐工机械', '000503': '国新健康', '000513': '丽珠集团',
    '000538': '云南白药', '000540': '中天金融', '000559': '万向钱潮', '000568': '泸州老窖',
    '000596': '古井贡酒', '000625': '长安汽车', '000627': '天茂集团', '000629': '攀钢钒钛',
    '000630': '铜陵有色', '000651': '格力电器', '000661': '长春高新', '000671': '阳光城',
    '000703': '恒逸石化', '000708': '中信特钢', '000709': '河钢股份', '000723': '美锦能源',
    '000725': '京东方A', '000728': '国元证券', '000738': '航发控制', '000768': '中航西飞',
    '000776': '广发证券', '000783': '长江证券', '000786': '北新建材', '000792': '盐湖股份',
    '000800': '一汽解放', '000826': '启迪环境', '000830': '鲁西化工', '000858': '五粮液',
    '000860': '顺鑫农业', '000876': '新希望', '000877': '天山股份', '000895': '双汇发展',
    '000898': '鞍钢股份', '000938': '紫光股份', '000959': '首钢股份', '000961': '中南建设',
    '000963': '华东医药', '001979': '招商蛇口',

    # 深圳主板 - 002开头
    '002001': '新和成', '002007': '华兰生物', '002008': '大族激光', '002024': '苏宁易购',
    '002027': '分众传媒', '002032': '苏泊尔', '002044': '美年健康', '002049': '紫光国微',
    '002050': '三花智控', '002064': '华峰化学', '002065': '东华软件', '002074': '国轩高科',
    '002081': '金螳螂', '002120': '韵达股份', '002129': '中环股份', '002142': '宁波银行',
    '002153': '石基信息', '002179': '中航光电', '002202': '金风科技', '002230': '科大讯飞',
    '002236': '大华股份', '002241': '歌尔股份', '002252': '上海莱士', '002271': '东方雨虹',
    '002304': '洋河股份', '002311': '海大集团', '002352': '顺丰控股', '002371': '北方华创',
    '002384': '东山精密', '002410': '广联达', '002415': '海康威视', '002422': '科伦药业',
    '002430': '杭氧股份', '002456': '欧菲光', '002460': '赣锋锂业', '002463': '沪电股份',
    '002466': '天齐锂业', '002475': '立讯精密', '002493': '荣盛石化', '002500': '山西证券',
    '002508': '老板电器', '002555': '三七互娱', '002594': '比亚迪', '002601': '龙佰集团',
    '002602': '世纪华通', '002607': '中公教育', '002624': '完美世界', '002648': '卫星化学',
    '002673': '西部证券', '002714': '牧原股份', '002736': '国信证券', '002739': '万达电影',
    '002797': '第一创业', '002812': '恩捷股份', '002821': '凯莱英', '002841': '视源股份',
    '002916': '深南电路', '002920': '德赛西威', '002938': '鹏鼎控股', '002945': '华林证券',
    '002958': '青农商行', '002966': '苏州银行',
}

# 尝试从JSON文件加载完整列表
def load_stock_list_from_json():
    """从JSON文件加载完整的股票列表"""
    json_path = os.path.join(os.path.dirname(__file__), 'stock_list.json')
    if os.path.exists(json_path):
        try:
            with open(json_path, 'r', encoding='utf-8') as f:
                return json.load(f)
        except Exception as e:
            print(f"加载stock_list.json失败: {e}")
            return {}
    return {}

# 加载完整列表（如果存在）
FULL_STOCK_LIST = load_stock_list_from_json()

# 合并映射表
ALL_STOCK_NAMES = {**STOCK_NAMES, **FULL_STOCK_LIST}

def get_stock_name(code):
    """
    根据股票代码获取中文名称

    Args:
        code: 股票代码，如 '600000' 或 '600000.SS'

    Returns:
        中文名称
    """
    # 移除后缀 .SS 或 .SZ
    clean_code = code.split('.')[0]

    # 从合并后的映射表中查找
    name = ALL_STOCK_NAMES.get(clean_code)

    if name:
        return name
    else:
        # 如果找不到，使用更友好的命名
        # 不再显示"沪市600123"，而是显示"上交所600123"或"深交所000123"
        if clean_code.startswith('6'):
            return f"上交所{clean_code}"
        elif clean_code.startswith('0'):
            return f"深交所{clean_code}"
        else:
            return f"股票{clean_code}"

# 打印加载信息
if FULL_STOCK_LIST:
    print(f"✅ 已从JSON文件加载 {len(FULL_STOCK_LIST)} 只股票名称")
else:
    print(f"ℹ️ 使用内置映射表（{len(STOCK_NAMES)} 只���票）")
print(f"📊 总计可用: {len(ALL_STOCK_NAMES)} 只股票的中文名称")
